/* 
 * File:   constants.h
 * Author: User
 *
 * Created on 15 November 2022, 18:16
 */
void constants (void);
#ifndef CONSTANTS_H
#define	CONSTANTS_H

#define _XTAL_FREQ 16000000

/********PIN ALIASES**********/
#define SDO PORTCbits.RC7  // SDO pin 9
#define SCK PORTBbits.RB6  // SCK pin 11
#define CE1 PORTAbits.RA4  // CE1 chip enable 1 pin 3
#define CE2 LATAbits.LATA5  // CE2 chip enable 2 pin 2
#define RST LATBbits.LATB5  // RST reset pin 12
#define DCI LATCbits.LATC6  // DCI (Data = HI, Command = LO) pin 8


/* Controller parameters */
#define KP  10
#define KI  1
#define KD  64

#define TAU 5

#define LIM_MIN -750
#define LIM_MAX 3000

#define LIM_MIN_INT -750
#define LIM_MAX_INT  3000

#define SAMPLE_TIME_S 3

#define ALPHA 5

#include <stdint.h>
//#include <stdio.h>
//#include <stdbool.h>
#include <xc.h>

const int16_t SCALER =  255;    // scaling factor used in PID calculations

/*enable abstraction of the column(0-83)/ page(0 to 5) of the lcd
  to allow pixels to be addressed individually from col = 0 - 83
  and row = 0 - 47
   */
typedef struct
{                   
    uint8_t page;   /* ranges from 0 to 5*/
    uint8_t byte;   /* ranges from 0 to 255*/
}pageToRow;


enum{
    LO,     // LO = 0, HI = 1
    HI
};
int16_t adcVal = 0;    // 10 bit adc value ranges from 0 to 1023 (1.023Vref selected)
int16_t newVal = 0;
/*sine of 0 degrees to 90 degrees using integer maths*/
const  int16_t sineLookUp[] = /// sin(degress) *255, -90 <= sin(degrees)<= +90
 { -255,    //-90 deg sin (-90) = -1
    -254,
    -254,
    -254,
    -254,
    -254,
    -253,
    -253,
    -252,
    -251,
    -251,
    -250,
    -249,
    -248,
    -247,
    -246,
    -245,
    -243,
    -242,
    -241,
    -239,
    -238,
    -236,
    -234,
    -232,
    -231,
    -229,
    -227,
    -225,
    -223,
    -220,
    -218,
    -216,
    -213,
    -211,
    -208,
    -206,
    -203,
    -200,
    -198,
    -195,
    -192,
    -189,
    -186,
    -183,
    -180,   //-45 deg sin(-45) = -0.707
    -177,
    -173,
    -170,
    -167,
    -163,
    -160,
    -156,
    -153,
    -149,
    -146,
    -142,
    -138,
    -135,
    -131,
    -127,
    -123,
    -119,
    -115,
    -111,
    -107,
    -103,
    -99,
    -95,
    -91,
    -87,
    -83,
    -78,
    -74,
    -70,
    -65,
    -61,
    -57,
    -53,
    -48,
    -44,
    -39,
    -35,
    -31,
    -26,
    -22,
    -17,
    -13,
    -8,
    -4,
    0,      // 0 deg
    4,
    8,
    13,
    17,
    22,
    26,
    31,
    35,
    39,
    44,
    48,
    53,
    57,
    61,
    65,
    70,
    74,
    78,
    83,
    87,
    91,
    95,
    99,
    103,
    107,
    111,
    115,
    119,
    123,
    127,
    131,
    135,
    138,
    142,
    146,
    149,
    153,
    156,
    160,
    163,
    167,
    170,
    173,
    177,   
    180,     //+135 deg = +0.707
    183,
    186,
    189,
    192,
    195,
    198,
    200,
    203,
    206,
    208,
    211,
    213,
    216,
    218,
    220,
    223,
    225,
    227,
    229,
    231,
    232,
    234,
    236,
    238,
    239,
    241,
    242,
    243,
    245,
    246,
    247,
    248,
    249,
    250,
    251,
    251,
    252,
    253,
    253,
    254,
    254,
    254,
    254,
    254,
    255};   // +180 deg = 0

 const int16_t cosineLookUp[] = // cos(degress) *255, -90 <= cos(degrees)<= +90
 {0,
    4,
    8,
    13,
    17,
    22,
    26,
    31,
    35,
    39,
    44,
    48,
    53,
    57,
    61,
    65,
    70,
    74,
    78,
    83,
    87,
    91,
    95,
    99,
    103,
    107,
    111,
    115,
    119,
    123,
    127,
    131,
    135,
    138,
    142,
    146,
    149,
    153,
    156,
    160,
    163,
    167,
    170,
    173,
    177,
    180,
    183,
    186,
    189,
    192,
    195,
    198,
    200,
    203,
    206,
    208,
    211,
    213,
    216,
    218,
    220,
    223,
    225,
    227,
    229,
    231,
    232,
    234,
    236,
    238,
    239,
    241,
    242,
    243,
    245,
    246,
    247,
    248,
    249,
    250,
    251,
    251,
    252,
    253,
    253,
    254,
    254,
    254,
    254,
    254,
    255,
    254,
    254,
    254,
    254,
    254,
    253,
    253,
    252,
    251,
    251,
    250,
    249,
    248,
    247,
    246,
    245,
    243,
    242,
    241,
    239,
    238,
    236,
    234,
    232,
    231,
    229,
    227,
    225,
    223,
    220,
    218,
    216,
    213,
    211,
    208,
    206,
    203,
    200,
    198,
    195,
    192,
    189,
    186,
    183,
    180,
    177,
    173,
    170,
    167,
    163,
    160,
    156,
    153,
    149,
    146,
    142,
    138,
    135,
    131,
    127,
    123,
    119,
    115,
    111,
    107,
    103,
    99,
    95,
    91,
    87,
    83,
    78,
    74,
    70,
    65,
    61,
    57,
    53,
    48,
    44,
    39,
    35,
    31,
    26,
    22,
    17,
    13,
    8,
    4,
    0 };
 
                        
#endif	/* CONSTANTS_H */

